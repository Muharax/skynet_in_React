{"ast":null,"code":"import _slicedToArray from\"C:/Users/Neo/Desktop/WWW/react/skynet/skynet/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef,useEffect}from'react';import{Stage,Layer,Line,Rect,Text}from'react-konva';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GRID_SIZE=10;var TILE_WIDTH=64;// szerokość kafelka\nvar TILE_HEIGHT=TILE_WIDTH/2;// wysokość kafelka\nfunction Tile(_ref){var gridX=_ref.gridX,gridY=_ref.gridY,onClick=_ref.onClick;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isHovered=_useState2[0],setIsHovered=_useState2[1];var isoX=(gridX-gridY)*TILE_WIDTH/2;var isoY=(gridX+gridY)*TILE_HEIGHT/2;var points=[isoX,isoY,isoX+TILE_WIDTH/2,isoY+TILE_HEIGHT/2,isoX,isoY+TILE_HEIGHT,isoX-TILE_WIDTH/2,isoY+TILE_HEIGHT/2];var handleClick=function handleClick(e){e.cancelBubble=true;onClick(isoX,isoY);};return/*#__PURE__*/_jsx(Line,{points:points,fill:isHovered?'#f00':(gridX+gridY)%2===0?'#ccc':'#999',closed:true,onMouseEnter:function onMouseEnter(){return setIsHovered(true);},onMouseLeave:function onMouseLeave(){return setIsHovered(false);},onClick:handleClick});}function MenuButton(_ref2){var x=_ref2.x,y=_ref2.y,text=_ref2.text,onClick=_ref2.onClick;var handleClick=function handleClick(e){e.cancelBubble=true;onClick();};return/*#__PURE__*/_jsx(Rect,{x:x,y:y,width:TILE_WIDTH,height:TILE_HEIGHT/2,fill:\"#ddd\",stroke:\"#000\",strokeWidth:1,onClick:handleClick});}function Menu(_ref3){var x=_ref3.x,y=_ref3.y;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MenuButton,{x:x,y:y,value:\"Buduj\",text:\"Button 1\",onClick:function onClick(){return console.log(\"Button 1 clicked\");}}),/*#__PURE__*/_jsx(MenuButton,{x:x,y:y+TILE_HEIGHT/2,text:\"Button 2\",onClick:function onClick(){return console.log(\"Button 2 clicked\");}})]});}function CanvasComponent(){var stageRef=useRef();var layerRef=useRef();var containerRef=useRef();var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),menuPos=_useState4[0],setMenuPos=_useState4[1];useEffect(function(){var container=containerRef.current;var stage=stageRef.current;stage.width(container.offsetWidth);stage.height(container.offsetHeight);// Wyśrodkowanie warstwy po załadowaniu\nvar layer=layerRef.current;var x=(container.offsetWidth-layer.width())/2;var y=(container.offsetHeight-layer.height())/2;layer.position({x:x,y:y});},[]);var handleTileClick=function handleTileClick(x,y){setMenuPos({x:x,y:y});};var tiles=[];for(var i=0;i<GRID_SIZE;i++){for(var j=0;j<GRID_SIZE;j++){tiles.push(/*#__PURE__*/_jsx(Tile,{gridX:i,gridY:j,onClick:handleTileClick},\"\".concat(i,\"-\").concat(j)));}}return/*#__PURE__*/_jsx(\"div\",{ref:containerRef,style:{width:'80vw',height:'80vh',display:'flex',alignItems:'center',justifyContent:'center',margin:'auto',backgroundColor:'white'},children:/*#__PURE__*/_jsx(Stage,{ref:stageRef,onClick:function onClick(){return setMenuPos(null);},children:/*#__PURE__*/_jsxs(Layer,{ref:layerRef,draggable:true,children:[tiles,menuPos&&/*#__PURE__*/_jsx(Menu,{x:menuPos.x,y:menuPos.y})]})})});}export default CanvasComponent;","map":{"version":3,"names":["React","useState","useRef","useEffect","Stage","Layer","Line","Rect","Text","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","GRID_SIZE","TILE_WIDTH","TILE_HEIGHT","Tile","_ref","gridX","gridY","onClick","_useState","_useState2","_slicedToArray","isHovered","setIsHovered","isoX","isoY","points","handleClick","e","cancelBubble","fill","closed","onMouseEnter","onMouseLeave","MenuButton","_ref2","x","y","text","width","height","stroke","strokeWidth","Menu","_ref3","children","value","console","log","CanvasComponent","stageRef","layerRef","containerRef","_useState3","_useState4","menuPos","setMenuPos","container","current","stage","offsetWidth","offsetHeight","layer","position","handleTileClick","tiles","i","j","push","concat","ref","style","display","alignItems","justifyContent","margin","backgroundColor","draggable"],"sources":["C:/Users/Neo/Desktop/WWW/react/skynet/skynet/src/siatka/siatka-izometryczna.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { Stage, Layer, Line, Rect, Text } from 'react-konva';\n\nconst GRID_SIZE = 10;\nconst TILE_WIDTH = 64;  // szerokość kafelka\nconst TILE_HEIGHT = TILE_WIDTH / 2;  // wysokość kafelka\n\nfunction Tile({ gridX, gridY, onClick }) {\n  const [isHovered, setIsHovered] = useState(false);\n\n  const isoX = (gridX - gridY) * TILE_WIDTH / 2;\n  const isoY = (gridX + gridY) * TILE_HEIGHT / 2;\n\n  const points = [\n    isoX, isoY,\n    isoX + TILE_WIDTH / 2, isoY + TILE_HEIGHT / 2,\n    isoX, isoY + TILE_HEIGHT,\n    isoX - TILE_WIDTH / 2, isoY + TILE_HEIGHT / 2,\n  ];\n\n  const handleClick = (e) => {\n    e.cancelBubble = true;\n    onClick(isoX, isoY);\n  }\n\n  return (\n    <Line\n      points={points}\n      fill={isHovered ? '#f00' : ((gridX + gridY) % 2 === 0 ? '#ccc' : '#999')}\n      closed\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n      onClick={handleClick}\n    />\n  );\n}\n\nfunction MenuButton({ x, y, text, onClick }) {\n  const handleClick = (e) => {\n    e.cancelBubble = true;\n    onClick();\n  }\n\n  return (\n    <Rect\n      x={x}\n      y={y}\n      width={TILE_WIDTH}\n      height={TILE_HEIGHT / 2}\n      fill=\"#ddd\"\n      stroke=\"#000\"\n      strokeWidth={1}\n      onClick={handleClick}\n    />\n  );\n}\n\nfunction Menu({ x, y }) {\n  return (\n    <>\n      <MenuButton x={x} y={y} value=\"Buduj\" text=\"Button 1\" onClick={() => console.log(\"Button 1 clicked\")} />\n      <MenuButton x={x} y={y + TILE_HEIGHT / 2} text=\"Button 2\" onClick={() => console.log(\"Button 2 clicked\")} />\n    </>\n  );\n}\n\nfunction CanvasComponent() {\n  const stageRef = useRef();\n  const layerRef = useRef();\n  const containerRef = useRef();\n  const [menuPos, setMenuPos] = useState(null);\n\n  useEffect(() => {\n    const container = containerRef.current;\n    const stage = stageRef.current;\n    stage.width(container.offsetWidth);\n    stage.height(container.offsetHeight);\n\n    // Wyśrodkowanie warstwy po załadowaniu\n    const layer = layerRef.current;\n    const x = (container.offsetWidth - layer.width()) / 2;\n    const y = (container.offsetHeight - layer.height()) / 2;\n    layer.position({ x, y });\n  }, []);\n\n  const handleTileClick = (x, y) => {\n    setMenuPos({ x, y });\n  }\n\n  const tiles = [];\n  for (let i = 0; i < GRID_SIZE; i++) {\n    for (let j = 0; j < GRID_SIZE; j++) {\n      tiles.push(<Tile gridX={i} gridY={j} key={`${i}-${j}`} onClick={handleTileClick} />);\n    }\n  }\n\n  return (\n    <div ref={containerRef} style={{ width: '80vw', height: '80vh', display: 'flex', alignItems: 'center', justifyContent: 'center', margin: 'auto', backgroundColor: 'white' }}>\n      <Stage ref={stageRef} onClick={() => setMenuPos(null)}>\n        <Layer \n          ref={layerRef}\n          draggable\n        >\n          {tiles}\n          {menuPos && <Menu x={menuPos.x} y={menuPos.y} />}\n        </Layer>\n      </Stage>\n    </div>\n  );\n}\n\nexport default CanvasComponent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}