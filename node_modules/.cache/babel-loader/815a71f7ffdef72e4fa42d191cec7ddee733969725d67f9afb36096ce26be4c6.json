{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Neo\\\\Desktop\\\\WWW\\\\react\\\\skynet\\\\skynet\\\\src\\\\test\\\\siatka-izometryczna.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Stage, Layer, Line } from 'react-konva';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GRID_SIZE = 10;\nconst TILE_WIDTH = 64; // szerokość kafelka\nconst TILE_HEIGHT = TILE_WIDTH / 2; // wysokość kafelka\n\nfunction Tile({\n  gridX,\n  gridY\n}) {\n  _s();\n  const [isHovered, setIsHovered] = useState(false);\n  const isoX = (gridX - gridY) * TILE_WIDTH / 2;\n  const isoY = (gridX + gridY) * TILE_HEIGHT / 2;\n  const points = [isoX, isoY, isoX + TILE_WIDTH / 2, isoY + TILE_HEIGHT / 2, isoX, isoY + TILE_HEIGHT, isoX - TILE_WIDTH / 2, isoY + TILE_HEIGHT / 2];\n  return /*#__PURE__*/_jsxDEV(Line, {\n    points: points,\n    fill: isHovered ? '#f00' : (gridX + gridY) % 2 === 0 ? '#ccc' : '#999',\n    closed: true,\n    onMouseEnter: () => setIsHovered(true),\n    onMouseLeave: () => setIsHovered(false)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 5\n  }, this);\n}\n_s(Tile, \"FPQn8a98tPjpohC7NUYORQR8GJE=\");\n_c = Tile;\nfunction DraggableObject({\n  initialGridX = 0,\n  initialGridY = 0\n}) {\n  _s2();\n  const [gridX, setGridX] = useState(initialGridX);\n  const [gridY, setGridY] = useState(initialGridY);\n  const isoX = (gridX - gridY) * TILE_WIDTH / 2;\n  const isoY = (gridX + gridY) * TILE_HEIGHT / 2;\n  const points = [isoX, isoY, isoX + TILE_WIDTH / 2, isoY + TILE_HEIGHT / 2, isoX, isoY + TILE_HEIGHT, isoX - TILE_WIDTH / 2, isoY + TILE_HEIGHT / 2];\n  const handleDragEnd = e => {\n    const newX = e.target.x();\n    const newY = e.target.y();\n\n    // Oblicz najbliższe współrzędne siatki dla nowego położenia\n    const newGridX = Math.round((newX / TILE_WIDTH + newY / TILE_HEIGHT) / 2);\n    const newGridY = Math.round((newY / TILE_HEIGHT - newX / TILE_WIDTH) / 2);\n    setGridX(newGridX);\n    setGridY(newGridY);\n  };\n  return /*#__PURE__*/_jsxDEV(Line, {\n    points: points,\n    fill: \"#0f0\",\n    closed: true,\n    draggable: true,\n    onDragEnd: handleDragEnd\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n_s2(DraggableObject, \"CfffdyFFDWfXS8LblVS2Pu2+ddo=\");\n_c2 = DraggableObject;\nfunction CanvasComponent() {\n  _s3();\n  const stageRef = useRef();\n  const layerRef = useRef();\n  const containerRef = useRef();\n  useEffect(() => {\n    const container = containerRef.current;\n    const stage = stageRef.current;\n    stage.width(container.offsetWidth);\n    stage.height(container.offsetHeight);\n\n    // Wyśrodkowanie warstwy po załadowaniu\n    const layer = layerRef.current;\n    const x = (container.offsetWidth - layer.width()) / 2;\n    const y = (container.offsetHeight - layer.height()) / 2;\n    layer.position({\n      x,\n      y\n    });\n  }, []);\n  const tiles = [];\n  for (let i = 0; i < GRID_SIZE; i++) {\n    for (let j = 0; j < GRID_SIZE; j++) {\n      tiles.push( /*#__PURE__*/_jsxDEV(Tile, {\n        gridX: i,\n        gridY: j\n      }, `${i}-${j}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 18\n      }, this));\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: containerRef,\n    style: {\n      width: '80vw',\n      height: '80vh',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      margin: 'auto',\n      backgroundColor: 'white'\n    },\n    children: /*#__PURE__*/_jsxDEV(Stage, {\n      ref: stageRef,\n      children: /*#__PURE__*/_jsxDEV(Layer, {\n        ref: layerRef,\n        draggable: true,\n        children: [tiles, /*#__PURE__*/_jsxDEV(DraggableObject, {\n          initialGridX: 0,\n          initialGridY: 0\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n}\n_s3(CanvasComponent, \"5hK3aPTK172a/AgTd/INC+VBUrA=\");\n_c3 = CanvasComponent;\nexport default CanvasComponent;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Tile\");\n$RefreshReg$(_c2, \"DraggableObject\");\n$RefreshReg$(_c3, \"CanvasComponent\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Stage","Layer","Line","jsxDEV","_jsxDEV","GRID_SIZE","TILE_WIDTH","TILE_HEIGHT","Tile","gridX","gridY","_s","isHovered","setIsHovered","isoX","isoY","points","fill","closed","onMouseEnter","onMouseLeave","fileName","_jsxFileName","lineNumber","columnNumber","_c","DraggableObject","initialGridX","initialGridY","_s2","setGridX","setGridY","handleDragEnd","e","newX","target","x","newY","y","newGridX","Math","round","newGridY","draggable","onDragEnd","_c2","CanvasComponent","_s3","stageRef","layerRef","containerRef","container","current","stage","width","offsetWidth","height","offsetHeight","layer","position","tiles","i","j","push","ref","style","display","alignItems","justifyContent","margin","backgroundColor","children","_c3","$RefreshReg$"],"sources":["C:/Users/Neo/Desktop/WWW/react/skynet/skynet/src/test/siatka-izometryczna.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { Stage, Layer, Line } from 'react-konva';\n\nconst GRID_SIZE = 10;\nconst TILE_WIDTH = 64;  // szerokość kafelka\nconst TILE_HEIGHT = TILE_WIDTH / 2;  // wysokość kafelka\n\nfunction Tile({ gridX, gridY }) {\n  const [isHovered, setIsHovered] = useState(false);\n\n  const isoX = (gridX - gridY) * TILE_WIDTH / 2;\n  const isoY = (gridX + gridY) * TILE_HEIGHT / 2;\n\n  const points = [\n    isoX, isoY,\n    isoX + TILE_WIDTH / 2, isoY + TILE_HEIGHT / 2,\n    isoX, isoY + TILE_HEIGHT,\n    isoX - TILE_WIDTH / 2, isoY + TILE_HEIGHT / 2,\n  ];\n\n  return (\n    <Line\n      points={points}\n      fill={isHovered ? '#f00' : ((gridX + gridY) % 2 === 0 ? '#ccc' : '#999')}\n      closed\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n    />\n  );\n}\n\nfunction DraggableObject({ initialGridX = 0, initialGridY = 0 }) {\n  const [gridX, setGridX] = useState(initialGridX);\n  const [gridY, setGridY] = useState(initialGridY);\n\n  const isoX = (gridX - gridY) * TILE_WIDTH / 2;\n  const isoY = (gridX + gridY) * TILE_HEIGHT / 2;\n\n  const points = [\n    isoX, isoY,\n    isoX + TILE_WIDTH / 2, isoY + TILE_HEIGHT / 2,\n    isoX, isoY + TILE_HEIGHT,\n    isoX - TILE_WIDTH / 2, isoY + TILE_HEIGHT / 2,\n  ];\n\n  const handleDragEnd = (e) => {\n    const newX = e.target.x();\n    const newY = e.target.y();\n    \n    // Oblicz najbliższe współrzędne siatki dla nowego położenia\n    const newGridX = Math.round((newX / TILE_WIDTH + newY / TILE_HEIGHT) / 2);\n    const newGridY = Math.round((newY / TILE_HEIGHT - newX / TILE_WIDTH) / 2);\n\n    setGridX(newGridX);\n    setGridY(newGridY);\n  }\n\n  return (\n    <Line\n      points={points}\n      fill=\"#0f0\"\n      closed\n      draggable\n      onDragEnd={handleDragEnd}\n    />\n  );\n}\n\nfunction CanvasComponent() {\n  const stageRef = useRef();\n  const layerRef = useRef();\n  const containerRef = useRef();\n\n  useEffect(() => {\n    const container = containerRef.current;\n    const stage = stageRef.current;\n    stage.width(container.offsetWidth);\n    stage.height(container.offsetHeight);\n\n    // Wyśrodkowanie warstwy po załadowaniu\n    const layer = layerRef.current;\n    const x = (container.offsetWidth - layer.width()) / 2;\n    const y = (container.offsetHeight - layer.height()) / 2;\n    layer.position({ x, y });\n  }, []);\n\n  const tiles = [];\n  for (let i = 0; i < GRID_SIZE; i++) {\n    for (let j = 0; j < GRID_SIZE; j++) {\n      tiles.push(<Tile gridX={i} gridY={j} key={`${i}-${j}`} />);\n    }\n  }\n\n  return (\n    <div ref={containerRef} style={{ width: '80vw', height: '80vh', display: 'flex', alignItems: 'center', justifyContent: 'center', margin: 'auto', backgroundColor: 'white' }}>\n      <Stage ref={stageRef}>\n        <Layer \n          ref={layerRef}\n          draggable\n        >\n          {tiles}\n          <DraggableObject initialGridX={0} initialGridY={0} />\n        </Layer>\n      </Stage>\n    </div>\n  );\n}\n\nexport default CanvasComponent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}