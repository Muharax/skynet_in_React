{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"C:/Users/Neo/Desktop/WWW/react/skynet/skynet/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"C:/Users/Neo/Desktop/WWW/react/skynet/skynet/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _get = require(\"C:/Users/Neo/Desktop/WWW/react/skynet/skynet/node_modules/@babel/runtime/helpers/get.js\").default;\nvar _getPrototypeOf = require(\"C:/Users/Neo/Desktop/WWW/react/skynet/skynet/node_modules/@babel/runtime/helpers/getPrototypeOf.js\").default;\nvar _inherits = require(\"C:/Users/Neo/Desktop/WWW/react/skynet/skynet/node_modules/@babel/runtime/helpers/inherits.js\").default;\nvar _createSuper = require(\"C:/Users/Neo/Desktop/WWW/react/skynet/skynet/node_modules/@babel/runtime/helpers/createSuper.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Sprite = void 0;\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Animation_1 = require(\"../Animation\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar Sprite = /*#__PURE__*/function (_Shape_1$Shape) {\n  _inherits(Sprite, _Shape_1$Shape);\n  var _super = _createSuper(Sprite);\n  function Sprite(config) {\n    var _this;\n    _classCallCheck(this, Sprite);\n    _this = _super.call(this, config);\n    _this._updated = true;\n    _this.anim = new Animation_1.Animation(function () {\n      var updated = _this._updated;\n      _this._updated = false;\n      return updated;\n    });\n    _this.on('animationChange.konva', function () {\n      this.frameIndex(0);\n    });\n    _this.on('frameIndexChange.konva', function () {\n      this._updated = true;\n    });\n    _this.on('frameRateChange.konva', function () {\n      if (!this.anim.isRunning()) {\n        return;\n      }\n      clearInterval(this.interval);\n      this._setInterval();\n    });\n    return _this;\n  }\n  _createClass(Sprite, [{\n    key: \"_sceneFunc\",\n    value: function _sceneFunc(context) {\n      var anim = this.animation(),\n        index = this.frameIndex(),\n        ix4 = index * 4,\n        set = this.animations()[anim],\n        offsets = this.frameOffsets(),\n        x = set[ix4 + 0],\n        y = set[ix4 + 1],\n        width = set[ix4 + 2],\n        height = set[ix4 + 3],\n        image = this.image();\n      if (this.hasFill() || this.hasStroke()) {\n        context.beginPath();\n        context.rect(0, 0, width, height);\n        context.closePath();\n        context.fillStrokeShape(this);\n      }\n      if (image) {\n        if (offsets) {\n          var offset = offsets[anim],\n            ix2 = index * 2;\n          context.drawImage(image, x, y, width, height, offset[ix2 + 0], offset[ix2 + 1], width, height);\n        } else {\n          context.drawImage(image, x, y, width, height, 0, 0, width, height);\n        }\n      }\n    }\n  }, {\n    key: \"_hitFunc\",\n    value: function _hitFunc(context) {\n      var anim = this.animation(),\n        index = this.frameIndex(),\n        ix4 = index * 4,\n        set = this.animations()[anim],\n        offsets = this.frameOffsets(),\n        width = set[ix4 + 2],\n        height = set[ix4 + 3];\n      context.beginPath();\n      if (offsets) {\n        var offset = offsets[anim];\n        var ix2 = index * 2;\n        context.rect(offset[ix2 + 0], offset[ix2 + 1], width, height);\n      } else {\n        context.rect(0, 0, width, height);\n      }\n      context.closePath();\n      context.fillShape(this);\n    }\n  }, {\n    key: \"_useBufferCanvas\",\n    value: function _useBufferCanvas() {\n      return _get(_getPrototypeOf(Sprite.prototype), \"_useBufferCanvas\", this).call(this, true);\n    }\n  }, {\n    key: \"_setInterval\",\n    value: function _setInterval() {\n      var that = this;\n      this.interval = setInterval(function () {\n        that._updateIndex();\n      }, 1000 / this.frameRate());\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      if (this.isRunning()) {\n        return;\n      }\n      var layer = this.getLayer();\n      this.anim.setLayers(layer);\n      this._setInterval();\n      this.anim.start();\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      this.anim.stop();\n      clearInterval(this.interval);\n    }\n  }, {\n    key: \"isRunning\",\n    value: function isRunning() {\n      return this.anim.isRunning();\n    }\n  }, {\n    key: \"_updateIndex\",\n    value: function _updateIndex() {\n      var index = this.frameIndex(),\n        animation = this.animation(),\n        animations = this.animations(),\n        anim = animations[animation],\n        len = anim.length / 4;\n      if (index < len - 1) {\n        this.frameIndex(index + 1);\n      } else {\n        this.frameIndex(0);\n      }\n    }\n  }]);\n  return Sprite;\n}(Shape_1.Shape);\nexports.Sprite = Sprite;\nSprite.prototype.className = 'Sprite';\n(0, Global_1._registerNode)(Sprite);\nFactory_1.Factory.addGetterSetter(Sprite, 'animation');\nFactory_1.Factory.addGetterSetter(Sprite, 'animations');\nFactory_1.Factory.addGetterSetter(Sprite, 'frameOffsets');\nFactory_1.Factory.addGetterSetter(Sprite, 'image');\nFactory_1.Factory.addGetterSetter(Sprite, 'frameIndex', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Sprite, 'frameRate', 17, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.backCompat(Sprite, {\n  index: 'frameIndex',\n  getIndex: 'getFrameIndex',\n  setIndex: 'setFrameIndex'\n});","map":{"version":3,"names":["_classCallCheck","require","default","_createClass","_get","_getPrototypeOf","_inherits","_createSuper","Object","defineProperty","exports","value","Sprite","Factory_1","Shape_1","Animation_1","Validators_1","Global_1","_Shape_1$Shape","_super","config","_this","call","_updated","anim","Animation","updated","on","frameIndex","isRunning","clearInterval","interval","_setInterval","key","_sceneFunc","context","animation","index","ix4","set","animations","offsets","frameOffsets","x","y","width","height","image","hasFill","hasStroke","beginPath","rect","closePath","fillStrokeShape","offset","ix2","drawImage","_hitFunc","fillShape","_useBufferCanvas","prototype","that","setInterval","_updateIndex","frameRate","start","layer","getLayer","setLayers","stop","len","length","Shape","className","_registerNode","Factory","addGetterSetter","getNumberValidator","backCompat","getIndex","setIndex"],"sources":["C:/Users/Neo/Desktop/WWW/react/skynet/skynet/node_modules/konva/lib/shapes/Sprite.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Sprite = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Shape_1 = require(\"../Shape\");\nconst Animation_1 = require(\"../Animation\");\nconst Validators_1 = require(\"../Validators\");\nconst Global_1 = require(\"../Global\");\nclass Sprite extends Shape_1.Shape {\n    constructor(config) {\n        super(config);\n        this._updated = true;\n        this.anim = new Animation_1.Animation(() => {\n            var updated = this._updated;\n            this._updated = false;\n            return updated;\n        });\n        this.on('animationChange.konva', function () {\n            this.frameIndex(0);\n        });\n        this.on('frameIndexChange.konva', function () {\n            this._updated = true;\n        });\n        this.on('frameRateChange.konva', function () {\n            if (!this.anim.isRunning()) {\n                return;\n            }\n            clearInterval(this.interval);\n            this._setInterval();\n        });\n    }\n    _sceneFunc(context) {\n        var anim = this.animation(), index = this.frameIndex(), ix4 = index * 4, set = this.animations()[anim], offsets = this.frameOffsets(), x = set[ix4 + 0], y = set[ix4 + 1], width = set[ix4 + 2], height = set[ix4 + 3], image = this.image();\n        if (this.hasFill() || this.hasStroke()) {\n            context.beginPath();\n            context.rect(0, 0, width, height);\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        if (image) {\n            if (offsets) {\n                var offset = offsets[anim], ix2 = index * 2;\n                context.drawImage(image, x, y, width, height, offset[ix2 + 0], offset[ix2 + 1], width, height);\n            }\n            else {\n                context.drawImage(image, x, y, width, height, 0, 0, width, height);\n            }\n        }\n    }\n    _hitFunc(context) {\n        var anim = this.animation(), index = this.frameIndex(), ix4 = index * 4, set = this.animations()[anim], offsets = this.frameOffsets(), width = set[ix4 + 2], height = set[ix4 + 3];\n        context.beginPath();\n        if (offsets) {\n            var offset = offsets[anim];\n            var ix2 = index * 2;\n            context.rect(offset[ix2 + 0], offset[ix2 + 1], width, height);\n        }\n        else {\n            context.rect(0, 0, width, height);\n        }\n        context.closePath();\n        context.fillShape(this);\n    }\n    _useBufferCanvas() {\n        return super._useBufferCanvas(true);\n    }\n    _setInterval() {\n        var that = this;\n        this.interval = setInterval(function () {\n            that._updateIndex();\n        }, 1000 / this.frameRate());\n    }\n    start() {\n        if (this.isRunning()) {\n            return;\n        }\n        var layer = this.getLayer();\n        this.anim.setLayers(layer);\n        this._setInterval();\n        this.anim.start();\n    }\n    stop() {\n        this.anim.stop();\n        clearInterval(this.interval);\n    }\n    isRunning() {\n        return this.anim.isRunning();\n    }\n    _updateIndex() {\n        var index = this.frameIndex(), animation = this.animation(), animations = this.animations(), anim = animations[animation], len = anim.length / 4;\n        if (index < len - 1) {\n            this.frameIndex(index + 1);\n        }\n        else {\n            this.frameIndex(0);\n        }\n    }\n}\nexports.Sprite = Sprite;\nSprite.prototype.className = 'Sprite';\n(0, Global_1._registerNode)(Sprite);\nFactory_1.Factory.addGetterSetter(Sprite, 'animation');\nFactory_1.Factory.addGetterSetter(Sprite, 'animations');\nFactory_1.Factory.addGetterSetter(Sprite, 'frameOffsets');\nFactory_1.Factory.addGetterSetter(Sprite, 'image');\nFactory_1.Factory.addGetterSetter(Sprite, 'frameIndex', 0, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.addGetterSetter(Sprite, 'frameRate', 17, (0, Validators_1.getNumberValidator)());\nFactory_1.Factory.backCompat(Sprite, {\n    index: 'frameIndex',\n    getIndex: 'getFrameIndex',\n    setIndex: 'setFrameIndex',\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}