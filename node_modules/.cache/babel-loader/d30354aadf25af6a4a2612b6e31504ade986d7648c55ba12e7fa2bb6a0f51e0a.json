{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Neo\\\\Desktop\\\\WWW\\\\react\\\\skynet\\\\skynet\\\\src\\\\test\\\\siatka-izometryczna.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Stage, Layer, Line, Rect, Text } from 'react-konva';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst GRID_SIZE = 10;\nconst TILE_WIDTH = 64; // szerokość kafelka\nconst TILE_HEIGHT = TILE_WIDTH / 2; // wysokość kafelka\n\nfunction Tile({\n  gridX,\n  gridY,\n  onClick\n}) {\n  _s();\n  const [isHovered, setIsHovered] = useState(false);\n  const isoX = (gridX - gridY) * TILE_WIDTH / 2;\n  const isoY = (gridX + gridY) * TILE_HEIGHT / 2;\n  const points = [isoX, isoY, isoX + TILE_WIDTH / 2, isoY + TILE_HEIGHT / 2, isoX, isoY + TILE_HEIGHT, isoX - TILE_WIDTH / 2, isoY + TILE_HEIGHT / 2];\n  const handleClick = e => {\n    e.cancelBubble = true;\n    onClick(isoX, isoY);\n  };\n  return /*#__PURE__*/_jsxDEV(Line, {\n    points: points,\n    fill: isHovered ? '#f00' : (gridX + gridY) % 2 === 0 ? '#ccc' : '#999',\n    closed: true,\n    onMouseEnter: () => setIsHovered(true),\n    onMouseLeave: () => setIsHovered(false),\n    onClick: handleClick\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 5\n  }, this);\n}\n_s(Tile, \"FPQn8a98tPjpohC7NUYORQR8GJE=\");\n_c = Tile;\nfunction MenuButton({\n  x,\n  y,\n  text,\n  onClick\n}) {\n  const handleClick = e => {\n    e.cancelBubble = true;\n    onClick();\n  };\n  return /*#__PURE__*/_jsxDEV(Rect, {\n    x: x,\n    y: y,\n    width: TILE_WIDTH,\n    height: TILE_HEIGHT / 2,\n    fill: \"#ddd\",\n    stroke: \"#000\",\n    strokeWidth: 1,\n    onClick: handleClick\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n_c2 = MenuButton;\nfunction Menu({\n  x,\n  y\n}) {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(MenuButton, {\n      x: x,\n      y: y,\n      value: \"Buduj\",\n      text: \"Button 1\",\n      onClick: () => console.log(\"Button 1 clicked\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MenuButton, {\n      x: x,\n      y: y + TILE_HEIGHT / 2,\n      text: \"Button 2\",\n      onClick: () => console.log(\"Button 2 clicked\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_c3 = Menu;\nfunction CanvasComponent() {\n  _s2();\n  const stageRef = useRef();\n  const layerRef = useRef();\n  const containerRef = useRef();\n  const [menuPos, setMenuPos] = useState(null);\n  useEffect(() => {\n    const container = containerRef.current;\n    const stage = stageRef.current;\n    stage.width(container.offsetWidth);\n    stage.height(container.offsetHeight);\n\n    // Wyśrodkowanie warstwy po załadowaniu\n    const layer = layerRef.current;\n    const x = (container.offsetWidth - layer.width()) / 2;\n    const y = (container.offsetHeight - layer.height()) / 2;\n    layer.position({\n      x,\n      y\n    });\n  }, []);\n  const handleTileClick = (x, y) => {\n    setMenuPos({\n      x,\n      y\n    });\n  };\n  const tiles = [];\n  for (let i = 0; i < GRID_SIZE; i++) {\n    for (let j = 0; j < GRID_SIZE; j++) {\n      tiles.push( /*#__PURE__*/_jsxDEV(Tile, {\n        gridX: i,\n        gridY: j,\n        onClick: handleTileClick\n      }, `${i}-${j}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 18\n      }, this));\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: containerRef,\n    style: {\n      width: '80vw',\n      height: '80vh',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      margin: 'auto',\n      backgroundColor: 'white'\n    },\n    children: /*#__PURE__*/_jsxDEV(Stage, {\n      ref: stageRef,\n      onClick: () => setMenuPos(null),\n      children: /*#__PURE__*/_jsxDEV(Layer, {\n        ref: layerRef,\n        draggable: true,\n        children: [tiles, menuPos && /*#__PURE__*/_jsxDEV(Menu, {\n          x: menuPos.x,\n          y: menuPos.y\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 23\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n}\n_s2(CanvasComponent, \"Vk/gEhLXITQ7+ake6HmbHTzy8jI=\");\n_c4 = CanvasComponent;\nexport default CanvasComponent;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"Tile\");\n$RefreshReg$(_c2, \"MenuButton\");\n$RefreshReg$(_c3, \"Menu\");\n$RefreshReg$(_c4, \"CanvasComponent\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Stage","Layer","Line","Rect","Text","jsxDEV","_jsxDEV","Fragment","_Fragment","GRID_SIZE","TILE_WIDTH","TILE_HEIGHT","Tile","gridX","gridY","onClick","_s","isHovered","setIsHovered","isoX","isoY","points","handleClick","e","cancelBubble","fill","closed","onMouseEnter","onMouseLeave","fileName","_jsxFileName","lineNumber","columnNumber","_c","MenuButton","x","y","text","width","height","stroke","strokeWidth","_c2","Menu","children","value","console","log","_c3","CanvasComponent","_s2","stageRef","layerRef","containerRef","menuPos","setMenuPos","container","current","stage","offsetWidth","offsetHeight","layer","position","handleTileClick","tiles","i","j","push","ref","style","display","alignItems","justifyContent","margin","backgroundColor","draggable","_c4","$RefreshReg$"],"sources":["C:/Users/Neo/Desktop/WWW/react/skynet/skynet/src/test/siatka-izometryczna.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { Stage, Layer, Line, Rect, Text } from 'react-konva';\n\nconst GRID_SIZE = 10;\nconst TILE_WIDTH = 64;  // szerokość kafelka\nconst TILE_HEIGHT = TILE_WIDTH / 2;  // wysokość kafelka\n\nfunction Tile({ gridX, gridY, onClick }) {\n  const [isHovered, setIsHovered] = useState(false);\n\n  const isoX = (gridX - gridY) * TILE_WIDTH / 2;\n  const isoY = (gridX + gridY) * TILE_HEIGHT / 2;\n\n  const points = [\n    isoX, isoY,\n    isoX + TILE_WIDTH / 2, isoY + TILE_HEIGHT / 2,\n    isoX, isoY + TILE_HEIGHT,\n    isoX - TILE_WIDTH / 2, isoY + TILE_HEIGHT / 2,\n  ];\n\n  const handleClick = (e) => {\n    e.cancelBubble = true;\n    onClick(isoX, isoY);\n  }\n\n  return (\n    <Line\n      points={points}\n      fill={isHovered ? '#f00' : ((gridX + gridY) % 2 === 0 ? '#ccc' : '#999')}\n      closed\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n      onClick={handleClick}\n    />\n  );\n}\n\nfunction MenuButton({ x, y, text, onClick }) {\n  const handleClick = (e) => {\n    e.cancelBubble = true;\n    onClick();\n  }\n\n  return (\n    <Rect\n      x={x}\n      y={y}\n      width={TILE_WIDTH}\n      height={TILE_HEIGHT / 2}\n      fill=\"#ddd\"\n      stroke=\"#000\"\n      strokeWidth={1}\n      onClick={handleClick}\n    />\n  );\n}\n\nfunction Menu({ x, y }) {\n  return (\n    <>\n      <MenuButton x={x} y={y} value=\"Buduj\" text=\"Button 1\" onClick={() => console.log(\"Button 1 clicked\")} />\n      <MenuButton x={x} y={y + TILE_HEIGHT / 2} text=\"Button 2\" onClick={() => console.log(\"Button 2 clicked\")} />\n    </>\n  );\n}\n\nfunction CanvasComponent() {\n  const stageRef = useRef();\n  const layerRef = useRef();\n  const containerRef = useRef();\n  const [menuPos, setMenuPos] = useState(null);\n\n  useEffect(() => {\n    const container = containerRef.current;\n    const stage = stageRef.current;\n    stage.width(container.offsetWidth);\n    stage.height(container.offsetHeight);\n\n    // Wyśrodkowanie warstwy po załadowaniu\n    const layer = layerRef.current;\n    const x = (container.offsetWidth - layer.width()) / 2;\n    const y = (container.offsetHeight - layer.height()) / 2;\n    layer.position({ x, y });\n  }, []);\n\n  const handleTileClick = (x, y) => {\n    setMenuPos({ x, y });\n  }\n\n  const tiles = [];\n  for (let i = 0; i < GRID_SIZE; i++) {\n    for (let j = 0; j < GRID_SIZE; j++) {\n      tiles.push(<Tile gridX={i} gridY={j} key={`${i}-${j}`} onClick={handleTileClick} />);\n    }\n  }\n\n  return (\n    <div ref={containerRef} style={{ width: '80vw', height: '80vh', display: 'flex', alignItems: 'center', justifyContent: 'center', margin: 'auto', backgroundColor: 'white' }}>\n      <Stage ref={stageRef} onClick={() => setMenuPos(null)}>\n        <Layer \n          ref={layerRef}\n          draggable\n        >\n          {tiles}\n          {menuPos && <Menu x={menuPos.x} y={menuPos.y} />}\n        </Layer>\n      </Stage>\n    </div>\n  );\n}\n\nexport default CanvasComponent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}