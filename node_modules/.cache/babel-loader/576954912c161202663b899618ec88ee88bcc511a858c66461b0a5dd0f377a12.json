{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Neo\\\\Desktop\\\\WWW\\\\react\\\\skynet\\\\skynet\\\\src\\\\MainWindow\\\\MainWindow.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from \"react\";\nimport { HashRouter as Router, Route, Link, Routes } from 'react-router-dom';\nimport Home from \"../Home/Home\";\nimport Uzytkownicy from \"../Uzytkownicy/Uzytkownicy\";\nimport logo from './img/logo.png';\nimport Search from \"./Search/Search\";\nimport LogoutX from \"../logout/logout\";\nimport { useQuery } from 'react-query'; // import react-query\nimport axios from 'axios'; // import axios\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MainWindow({\n  handleLogout,\n  serverMessage,\n  decodedToken\n}) {\n  _s();\n  // Stwórz funkcję, która pobierze dane o zalogowanym użytkowniku\n  const fetchUser = async () => {\n    const res = await axios.get('/api/user'); // podaj odpowiedni adres URL do API\n    return res.data;\n  };\n\n  // Użyj useQuery, aby pobierać dane o użytkowniku\n  const {\n    data: user,\n    isLoading,\n    error\n  } = useQuery('user', fetchUser);\n  useEffect(() => {\n    // jeżeli dane nie są ładowane i nie ma użytkownika, to wyloguj\n    if (!isLoading && !user) {\n      handleLogout();\n    }\n  }, [user, isLoading, handleLogout]);\n\n  // Jeżeli dane są ładowane, to pokaż informację o ładowaniu\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u0141adowanie...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 16\n    }, this);\n  }\n\n  // Jeżeli jest jakiś błąd, to pokaż informację o błędzie\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"B\\u0142\\u0105d! \", error.message]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 16\n    }, this);\n  }\n  return (\n    // Jeżeli użytkownik jest zalogowany, to pokaż interfejs\n    user && /*#__PURE__*/_jsxDEV(Router, {\n      children: [\"  \", /*#__PURE__*/_jsxDEV(LogoutX, {\n        onLogout: handleLogout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"MainWindow\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert\",\n          children: serverMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: serverMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 58\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"COL1\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"A1 LOGO\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/Home\",\n              children: [\"  \", /*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"logo-img\",\n                src: logo,\n                alt: \"Logo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 49,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"B1\",\n            children: /*#__PURE__*/_jsxDEV(Search, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"COL2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"A2\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"MENU\",\n              children: [decodedToken.role === 'admin' && /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/Uzytkownicy\",\n                children: \"U\\u017Cytkownicy\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 60,\n                columnNumber: 67\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/Rachunki\",\n                children: \"Rachunki\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 61,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/Finanse\",\n                children: \"Finanse\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"B2 OKNO\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"content\",\n              children: /*#__PURE__*/_jsxDEV(Routes, {\n                children: [/*#__PURE__*/_jsxDEV(Route, {\n                  path: \"/\",\n                  element: /*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 68,\n                    columnNumber: 62\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 68,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Route, {\n                  path: \"/Home\",\n                  element: /*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 70,\n                    columnNumber: 66\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 70,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Route, {\n                  path: \"/Uzytkownicy\",\n                  element: /*#__PURE__*/_jsxDEV(Uzytkownicy, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 71,\n                    columnNumber: 73\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 71,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this)\n  );\n}\n_s(MainWindow, \"RtGxYnef3h5SVZtuSp3/kL3s4bU=\", false, function () {\n  return [useQuery];\n});\n_c = MainWindow;\nexport default MainWindow;\nvar _c;\n$RefreshReg$(_c, \"MainWindow\");","map":{"version":3,"names":["React","useEffect","HashRouter","Router","Route","Link","Routes","Home","Uzytkownicy","logo","Search","LogoutX","useQuery","axios","jsxDEV","_jsxDEV","MainWindow","handleLogout","serverMessage","decodedToken","_s","fetchUser","res","get","data","user","isLoading","error","children","fileName","_jsxFileName","lineNumber","columnNumber","message","onLogout","className","to","src","alt","role","id","path","element","_c","$RefreshReg$"],"sources":["C:/Users/Neo/Desktop/WWW/react/skynet/skynet/src/MainWindow/MainWindow.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { HashRouter as Router, Route, Link, Routes } from 'react-router-dom';\r\nimport Home from \"../Home/Home\";\r\nimport Uzytkownicy from \"../Uzytkownicy/Uzytkownicy\";\r\nimport logo from './img/logo.png';\r\nimport Search from \"./Search/Search\";\r\nimport LogoutX from \"../logout/logout\";\r\nimport { useQuery } from 'react-query'; // import react-query\r\nimport axios from 'axios'; // import axios\r\n\r\nfunction MainWindow({ handleLogout, serverMessage, decodedToken }){\r\n\r\n    // Stwórz funkcję, która pobierze dane o zalogowanym użytkowniku\r\n    const fetchUser = async () => {\r\n        const res = await axios.get('/api/user'); // podaj odpowiedni adres URL do API\r\n        return res.data;\r\n    }\r\n\r\n    // Użyj useQuery, aby pobierać dane o użytkowniku\r\n    const { data: user, isLoading, error } = useQuery('user', fetchUser);\r\n\r\n    useEffect(() => {\r\n        // jeżeli dane nie są ładowane i nie ma użytkownika, to wyloguj\r\n        if (!isLoading && !user) {\r\n            handleLogout();\r\n        }\r\n    }, [user, isLoading, handleLogout]);\r\n\r\n    // Jeżeli dane są ładowane, to pokaż informację o ładowaniu\r\n    if (isLoading) {\r\n        return <div>Ładowanie...</div>;\r\n    }\r\n\r\n    // Jeżeli jest jakiś błąd, to pokaż informację o błędzie\r\n    if (error) {\r\n        return <div>Błąd! {error.message}</div>;\r\n    }\r\n\r\n    return(\r\n        // Jeżeli użytkownik jest zalogowany, to pokaż interfejs\r\n        user && (\r\n            <Router>  {/* Router na najwyższym poziomie */}\r\n                <LogoutX onLogout={handleLogout} />\r\n                <div className=\"MainWindow\">  \r\n                <div className=\"alert\">{serverMessage && <div>{serverMessage}</div>}</div>\r\n                    <div className=\"COL1\">\r\n                        <div className=\"A1 LOGO\">\r\n                            <Link to=\"/Home\">  {/* Dodanie linku do logo */}\r\n                                <img className=\"logo-img\" src={logo} alt=\"Logo\" />\r\n                            </Link>\r\n                        </div>\r\n                        <div className=\"B1\">\r\n                            <Search></Search>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"COL2\">\r\n                        <div className=\"A2\">\r\n                            <div className=\"MENU\">\r\n                                {decodedToken.role === 'admin' && <Link to=\"/Uzytkownicy\">Użytkownicy</Link>}\r\n                                <Link to=\"/Rachunki\">Rachunki</Link>\r\n                                <Link to=\"/Finanse\">Finanse</Link>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"B2 OKNO\">\r\n                                <div id=\"content\">\r\n                                <Routes>\r\n                                    <Route path=\"/\" element={<Home />} />\r\n\r\n                                    <Route path=\"/Home\" element={<Home />} />                                \r\n                                    <Route path=\"/Uzytkownicy\" element={<Uzytkownicy />} />\r\n                                </Routes>\r\n                                </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </Router>\r\n        )\r\n    )\r\n}\r\n\r\nexport default MainWindow;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}